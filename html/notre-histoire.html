<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notre Histoire</title>
    <link rel="icon" href="/assets/logo.webp" />
    <link rel="stylesheet" href="/css/notre-histoire.css" />
    <link rel="stylesheet" href="/css/navbar.css" />
    <link rel="stylesheet" href="/css/reset.css" />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Poppins:wght@300;500;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="/css/footer.css">
</head>

<body>
    <nav id="navbar">
        <div id="burger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <a href="/"><img id="logo" src="/assets/logo.webp" alt="Logo du club"></a>

        <div id="rubriques-desktop">
            <a class="rubriques" href="/html/jskiste">JSKISTE</a>
            <a class="rubriques" href="/html/billeterie">BILLETERIE</a>
            <a class="rubriques" href="/html/notre-histoire">NOTRE HISTOIRE</a>
        </div>

        <div id="navbar-icons">
            <a href="/html/panier.html"><img src="/assets/basket.webp" alt="Panier"></a>
            <a href="/html/seconnecter.html"><img src="/assets/avatar.webp" alt="Avatar"></a>
        </div>
    </nav>


    <div id="menu-mobile" class="hidden">
        <a class="rubriques" href="/html/jskiste">JSKISTE</a>
        <a class="rubriques" href="/html/billeterie">BILLETERIE</a>
        <a class="rubriques" href="/html/notre-histoire">NOTRE HISTOIRE</a>
    </div>
    <div id="intro">
        <button id="start-btn" onclick="startHistory()" aria-label="Commencer l'histoire de JS TOUHAR">Commencer
            lâ€™histoire</button>
    </div>

    <div class="history-section hidden-before-start">
        <div class="container">
            <h1 class="title">Notre Histoire</h1>
            <div class="timeline" id="timeline"></div>
        </div>
    </div>
    <footer id="site-footer">
        <p>&copy; 2025 JS TOUHAR â€” RÃ©alisÃ© par <strong>Mylan HACHEMANE</strong></p>
    </footer>
    <audio id="key-sound" src="../sons/tap.mp3" preload="auto"></audio>

    <script>
        const timelineData = [
            {
                title: "Naissance d'une passion âš½",
                text: "M. Touhar est nÃ© Ã  Mekla, en Kabylie, oÃ¹ il tombe amoureux du football dÃ¨s son plus jeune Ã¢ge."
            },
            {
                title: "Destination : France ðŸ‡«ðŸ‡·",
                text: "Pour rÃ©aliser son rÃªve, il part Ã  Montreuil en France afin de perfectionner son jeu tout en enseignant les maths et la SNT Ã  Saint Michel de Picpus."
            },
            {
                title: "Un Ã©lÃ¨ve pas comme les autres ðŸŒŸ",
                text: "Câ€™est lÃ  quâ€™il rencontre un Ã©lÃ¨ve extraordinaire : Mylan HACHEMANE, futur grand nom du foot analytique."
            },
            {
                title: "Retour aux sources ðŸ‡©ðŸ‡¿",
                text: "Quelques annÃ©es plus tard, M. Touhar retourne en AlgÃ©rie et fonde son propre club : JS TOUHAR."
            },
            {
                title: "Un club unique ðŸ”¥",
                text: "Il devient prÃ©sident, recruteur et coach du club. Sa mÃ©thode ? Boire 1L de zizitoune kabyle avant chaque entraÃ®nement et analyser mathÃ©matiquement chaque tir !"
            }
        ];

        function createEventBubble(data, index) {
            const div = document.createElement('div');
            div.className = 'event ' + (index % 2 === 0 ? 'left' : 'right');
            div.innerHTML = `<h2>${data.title}</h2><p><span class="typewriter-text"></span></p>`;
            return div;
        }

        function typeWriter(text, element, speed, callback) {
            let i = 0;
            const audio = document.getElementById('key-sound');
            if (audio && audio.readyState >= 2) {
                audio.currentTime = 0;
                audio.loop = true;
                audio.volume = 0.4;
                audio.play().catch(() => { });
            }

            const interval = setInterval(() => {
                element.textContent = text.substring(0, i);
                i++;
                if (i > text.length) {
                    clearInterval(interval);
                    if (audio) {
                        audio.pause();
                        audio.currentTime = 0;
                    }
                    setTimeout(callback, 800);
                }
            }, speed);
        }

        function showNext(index) {
            if (index >= timelineData.length) return;
            const timeline = document.getElementById('timeline');
            const bubble = createEventBubble(timelineData[index], index);
            timeline.appendChild(bubble);
            requestAnimationFrame(() => {
                bubble.classList.add('visible');
                typeWriter(timelineData[index].text, bubble.querySelector('.typewriter-text'), 30, () => showNext(index + 1));
            });
        }

        function startHistory() {
            const audio = document.getElementById('key-sound');
            if (audio && audio.readyState >= 2) {
                audio.currentTime = 0;
                audio.loop = true;
                audio.volume = 0.4;
                audio.play().catch(() => { });
            }
            document.getElementById('intro').style.display = 'none';
            document.querySelector('.history-section').classList.remove('hidden-before-start');
            showNext(0);
        }
        // burger
        const burger = document.getElementById("burger-menu");
        const mobileMenu = document.getElementById("menu-mobile");

        burger.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });
    </script>

</body>

</html>